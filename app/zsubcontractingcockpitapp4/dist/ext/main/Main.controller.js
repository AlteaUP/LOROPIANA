sap.ui.define(["sap/fe/core/PageController","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/MessageToast"],function(e,t,a,i){"use strict";var l;return e.extend("zsubcontractingcockpitapp4.ext.main.Main",{onInit:function(){l=this;e.prototype.onInit.apply(this,arguments)},onBeforeRendering:function(){l._mainService=l.getOwnerComponent().getModel()},onAfterRendering:function(){l._mainService=l.getOwnerComponent().getModel()},closeCreateMaterialDocumentsDialog:function(){l.pManualNumberingDialog.close()},onCreateMaterialDocuments:function(e){if(l.pManualNumberingDialog===null||l.pManualNumberingDialog===undefined){l.pManualNumberingDialog=sap.ui.xmlfragment(this.getView().getId(),"zsubcontractingcockpitapp4.ext.Fragment.MaterialDocumentCreation",l);l.getView().addDependent(l.pManualNumberingDialog)}l.pManualNumberingDialog.open();var a=[];for(var i=0;i<l.byId("TableOrderId").getSelectedContexts().length;i++){a.push(l.byId("TableOrderId").getSelectedContexts()[i].getObject())}if(e.getParameters().id.indexOf("customAction2")>-1){l.byId("lgort1ID").setVisible(true);l.byId("lgort2ID").setVisible(false);l.byId("ManualAccountingDialog").data("buttonPressed","HUB")}else{l.byId("lgort1ID").setVisible(false);l.byId("lgort2ID").setVisible(true);l.byId("ManualAccountingDialog").data("buttonPressed","factory")}var n=l.byId("selectedMaterialTableId");var o=new t;o.setData({SelectedMaterial:a});n.setModel(o)},zeroPad:function(e){return e.toString().padStart(12,"0")},onConfirmMaterialDocumentCreationDialog:function(){if(this.byId("shippingPointID").getValue()!==null&&this.byId("shippingPointID").getValue()!==undefined&&this.byId("shippingPointID").getValue()!==""){var e=new sap.m.BusyDialog;e.open();var t=l.byId("ManualAccountingDialog").data();var a=[];var n={};for(var o=0;o<this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial.length;o++){n={};n.Material=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].Material;n.Batch=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].Batch;n.Stock=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].StockMaterial;n.Quantity=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].TotalConfdQtyForATPInBaseUoM;n.CprodOrd=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].CprodOrd;n.CprodOrd=l.zeroPad(n.CprodOrd);n.UnitMeasure=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].EntryUnit;n.Plant=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].Plant;n.WorkCenterInternalID=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].WorkCenterInternalID;if(this.byId("ManualAccountingDialog").data("buttonPressed")==="HUB"){n.Lgort=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].Lgort1}else{n.Lgort=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].Lgort2}n.Vstel=this.byId("shippingPointID").getValue();n.Supplier=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].Supplier;if(this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].requirementtype==="BB"){n.Bwart="541";n.Lfart="LB";n.Customer=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].Customer;n.Supplier=this.byId("selectedMaterialTableId").getModel().getData().SelectedMaterial[o].Supplier}else{if(this.byId("ManualAccountingDialog").data("buttonPressed")==="HUB"){n.Bwart="313"}else{n.Bwart="311"}n.Lfart="ZHOD"}a.push(n)}var r=l._mainService.sServiceUrl;$.ajax({url:r+"/CreateMaterialDocument",type:"POST",data:JSON.stringify({Record:{Records:a}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t,a,i){e.close();if(t){if(t.Error){l.openDialogMessageText(t.Message,"E")}else{l.openDialogMessageText(t.Message,"I")}}else{l.openDialogMessageText("","I")}},error:function(t){e.close();if(t){if(t.responseJSON){l.openDialogMessageText(t.responseJSON.error.message,"E")}else{l.openDialogMessageText("","E")}}else{l.openDialogMessageText("","E")}}});l.pManualNumberingDialog.close()}else{i.show(l.getResourceBundle().getText("vstelMandatory"))}},onCloseMaterialDocumentCreationDialog:function(){l.pManualNumberingDialog.close()},getResourceBundle:function(){return l.getOwnerComponent().getModel("i18n").getResourceBundle()},openDialogMessageText:function(e,t){var i="Message";var l="Error";if(t==="E"){i=this.getResourceBundle().getText("errorTitle");l="Error"}else if(t==="I"){i=this.getResourceBundle().getText("successTitle");l="Success"}var n=new a({title:i,type:"Message",state:l,content:new sap.m.Text({text:e}),beginButton:new sap.m.Button({text:"OK",press:function(){n.close()}}),afterClose:function(){n.destroy()}});n.open()},onValueHelpRequestShippingPoint:function(e){this.byId("shippingPointID").setValue();if(l.pShippingPointDialog===null||l.pShippingPointDialog===undefined){l.pShippingPointDialog=sap.ui.xmlfragment(this.getView().getId(),"zsubcontractingcockpitapp4.ext.Fragment.ShippingPointList",l);l.getView().addDependent(l.pShippingPointDialog)}l.pShippingPointDialog.open()},onValueHelpShippingPointConfirm:function(e){var t=e.getParameter("selectedItem");e.getSource().getBinding("items").filter([]);if(!t){return}this.byId("shippingPointID").setValue(t.getTitle());l.pShippingPointDialog.close()},onValueHelpShippingPointClose:function(e){l.pShippingPointDialog.close()},onValueHelpShippingPointSearch:function(e){var t=e.getParameter("value");var a=new Filter("Name",FilterOperator.Contains,t);e.getSource().getBinding("items").filter([a])}})});
//# sourceMappingURL=Main.controller.js.map